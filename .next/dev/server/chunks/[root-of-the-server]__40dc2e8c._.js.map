{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Tejab/Desktop/final_year_project/TRACKSHEET/UI/app/api/platforms/codechef/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\n\r\nexport async function GET(request: NextRequest) {\r\n  const { searchParams } = new URL(request.url);\r\n  const username = searchParams.get(\"username\");\r\n\r\n  if (!username || username === \"username_here\") {\r\n    return NextResponse.json({\r\n      error: \"No username configured\",\r\n      username: null,\r\n      problemsSolved: 0,\r\n      rating: 0,\r\n      rank: 0,\r\n    });\r\n  }\r\n\r\n  try {\r\n    // CodeChef API endpoint - fetches user profile\r\n    const response = await fetch(\r\n      `https://codechef.com/api/users/${username}`,\r\n      {\r\n        headers: {\r\n          \"User-Agent\":\r\n            \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\",\r\n        },\r\n      }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      return NextResponse.json({\r\n        error: \"User not found\",\r\n        username,\r\n        problemsSolved: 0,\r\n        rating: 0,\r\n        rank: 0,\r\n      });\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    if (!data || !data.user) {\r\n      return NextResponse.json({\r\n        error: \"Invalid response\",\r\n        username,\r\n        problemsSolved: 0,\r\n        rating: 0,\r\n        rank: 0,\r\n      });\r\n    }\r\n\r\n    const user = data.user;\r\n\r\n    // Extract stats from CodeChef profile\r\n    const problemsSolved = user.fully_solved || 0;\r\n    const rating = user.rating || 0;\r\n    const rank = user.global_rank || 0;\r\n\r\n    return NextResponse.json({\r\n      username: user.username || username,\r\n      problemsSolved,\r\n      rating,\r\n      rank,\r\n      countryCode: user.country || null,\r\n      state: user.state || null,\r\n      city: user.city || null,\r\n      highestRating: user.highest_rating || rating,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"CodeChef API error:\", error);\r\n    return NextResponse.json(\r\n      {\r\n        error: \"Failed to fetch CodeChef data\",\r\n        username,\r\n        problemsSolved: 0,\r\n        rating: 0,\r\n        rank: 0,\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,IAAI,CAAC,YAAY,aAAa,iBAAiB;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,OAAO;YACP,UAAU;YACV,gBAAgB;YAChB,QAAQ;YACR,MAAM;QACR;IACF;IAEA,IAAI;QACF,+CAA+C;QAC/C,MAAM,WAAW,MAAM,MACrB,CAAC,+BAA+B,EAAE,UAAU,EAC5C;YACE,SAAS;gBACP,cACE;YACJ;QACF;QAGF,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,OAAO;gBACP;gBACA,gBAAgB;gBAChB,QAAQ;gBACR,MAAM;YACR;QACF;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,EAAE;YACvB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,OAAO;gBACP;gBACA,gBAAgB;gBAChB,QAAQ;gBACR,MAAM;YACR;QACF;QAEA,MAAM,OAAO,KAAK,IAAI;QAEtB,sCAAsC;QACtC,MAAM,iBAAiB,KAAK,YAAY,IAAI;QAC5C,MAAM,SAAS,KAAK,MAAM,IAAI;QAC9B,MAAM,OAAO,KAAK,WAAW,IAAI;QAEjC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,UAAU,KAAK,QAAQ,IAAI;YAC3B;YACA;YACA;YACA,aAAa,KAAK,OAAO,IAAI;YAC7B,OAAO,KAAK,KAAK,IAAI;YACrB,MAAM,KAAK,IAAI,IAAI;YACnB,eAAe,KAAK,cAAc,IAAI;QACxC;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,OAAO;YACP;YACA,gBAAgB;YAChB,QAAQ;YACR,MAAM;QACR,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}